{"ast":null,"code":"import { useEffect, useContext } from 'react';\nimport { useAsync } from 'react-hook-async';\nimport { AuthUserCtx } from '../context/auth';\nimport axios from 'axios';\n\nconst fetchMeApi = jwt => {\n  return axios.get('http://localhost:4000/auth/me', {\n    headers: {\n      Authorization: \"Bearer \" + jwt\n    }\n  }).then(res => res.data);\n};\n\nexport const useAuth = () => {\n  const [fetchMeApiData, executeFetchMe] = useAsync({}, fetchMeApi);\n  const {\n    setAuthUser\n  } = useContext(AuthUserCtx);\n  useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n    executeFetchMe(jwt).then(user => {\n      setAuthUser(user);\n    });\n  }, [executeFetchMe, setAuthUser]);\n  return fetchMeApiData;\n};","map":{"version":3,"sources":["/Users/phanhoang/Desktop/kodfrontend-15.10.20/src/hooks/useAuth.js"],"names":["useEffect","useContext","useAsync","AuthUserCtx","axios","fetchMeApi","jwt","get","headers","Authorization","then","res","data","useAuth","fetchMeApiData","executeFetchMe","setAuthUser","localStorage","getItem","user"],"mappings":"AAAA,SAAQA,SAAR,EAAmBC,UAAnB,QAAoC,OAApC;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,SAAQC,WAAR,QAA0B,iBAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,UAAU,GAAIC,GAAD,IAAS;AACxB,SAAQF,KAAK,CAACG,GAAN,CAAU,+BAAV,EAA4C;AAChDC,IAAAA,OAAO,EAAC;AACJC,MAAAA,aAAa,EAAE,YAAWH;AADtB;AADwC,GAA5C,EAILI,IAJK,CAICC,GAAD,IAASA,GAAG,CAACC,IAJb,CAAR;AAKH,CAND;;AAOA,OAAO,MAAMC,OAAO,GAAG,MAAK;AACxB,QAAM,CAACC,cAAD,EAAiBC,cAAjB,IAAmCb,QAAQ,CAAC,EAAD,EAAKG,UAAL,CAAjD;AACA,QAAM;AAACW,IAAAA;AAAD,MAAgBf,UAAU,CAACE,WAAD,CAAhC;AACAH,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMM,GAAG,GAAGW,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAZ;AACAH,IAAAA,cAAc,CAACT,GAAD,CAAd,CAAoBI,IAApB,CAA0BS,IAAD,IAAU;AAC/BH,MAAAA,WAAW,CAACG,IAAD,CAAX;AACH,KAFD;AAGH,GALQ,EAKN,CAACJ,cAAD,EAAiBC,WAAjB,CALM,CAAT;AAMA,SAAOF,cAAP;AACH,CAVM","sourcesContent":["import {useEffect, useContext} from 'react'\nimport {useAsync} from 'react-hook-async'\nimport {AuthUserCtx} from '../context/auth'\nimport axios from 'axios'\n\nconst fetchMeApi = (jwt) => {\n    return  axios.get('http://localhost:4000/auth/me',  {\n        headers:{\n            Authorization: \"Bearer \"+ jwt\n        }\n    }).then((res) => res.data)\n}\nexport const useAuth = () =>{\n    const [fetchMeApiData, executeFetchMe] = useAsync({} ,fetchMeApi)\n    const {setAuthUser} = useContext(AuthUserCtx)\n    useEffect(()=>{\n        const jwt = localStorage.getItem('jwt')\n        executeFetchMe(jwt).then((user) => {\n            setAuthUser(user)\n        })\n    }, [executeFetchMe, setAuthUser])\n    return fetchMeApiData\n}"]},"metadata":{},"sourceType":"module"}