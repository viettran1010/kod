{"ast":null,"code":"var _jsxFileName = \"/Users/phanhoang/Desktop/kodfrontend-15.10.20/src/auth/Login.js\";\nimport React, { useState, useContext } from 'react';\nimport { useFormik } from 'formik';\nimport { Card, Container, Form, Button, Alert } from 'react-bootstrap';\nimport * as yup from 'yup';\nimport axios from 'axios';\nimport { AuthUserCtx } from '../context/auth';\nimport { Redirect } from 'react-router-dom';\nconst validationSchema = yup.object().shape({\n  username: yup.string().min(6, 'Username is less than 6 characters').required('Username is required'),\n  password: yup.string().min(6, 'Password is less than 6 characters').required('Password is required')\n});\nexport const Login = () => {\n  const authUserCtx = useContext(AuthUserCtx);\n  const [login, setLogin] = useState(false);\n  const [isSuccess, setSuccess] = useState(false);\n  const [isError, setError] = useState(false);\n  const formik = useFormik({\n    initialValues: {\n      username: '',\n      password: ''\n    },\n    onSubmit: value => {\n      axios.post('http://localhost:4000/auth/login', {\n        username: value.username,\n        password: value.password\n      }).then(res => {\n        authUserCtx.setAuthUser(res.data.user);\n        localStorage.setItem('jwt', res.data.token);\n        setSuccess(true);\n        setError(false);\n      }).catch(() => {\n        setError(true);\n        setSuccess(false);\n      }).finally(() => {\n        setLogin(false);\n      });\n    },\n    validationSchema: validationSchema\n  });\n\n  if (authUserCtx.authUser) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 16\n      }\n    });\n  }\n\n  const {\n    handleSubmit,\n    handleChange,\n    handleBlur,\n    touched,\n    errors\n  } = formik;\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    border: \"info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, isSuccess ? /*#__PURE__*/React.createElement(Alert, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 30\n    }\n  }, \"Login successfully\") : null, login && isError ? /*#__PURE__*/React.createElement(Alert, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 41\n    }\n  }, \"Wrong username or password\") : null, /*#__PURE__*/React.createElement(Card.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }, \"Please fill out the form\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formBasicEmail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 29\n    }\n  }, \"User Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter User Name\",\n    name: \"username\",\n    onChange: handleChange,\n    onBlur: handleBlur,\n    isInvalid: touched.username && errors.username,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n    type: \"invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 29\n    }\n  }, errors.username)), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Password\",\n    name: \"password\",\n    onChange: handleChange,\n    onBlur: handleBlur,\n    isInvalid: touched.password && errors.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n    type: \"invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, errors.password)), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    type: \"submit\",\n    disabled: login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, login ? \"I'm Login\" : \"Login\")))));\n};","map":{"version":3,"sources":["/Users/phanhoang/Desktop/kodfrontend-15.10.20/src/auth/Login.js"],"names":["React","useState","useContext","useFormik","Card","Container","Form","Button","Alert","yup","axios","AuthUserCtx","Redirect","validationSchema","object","shape","username","string","min","required","password","Login","authUserCtx","login","setLogin","isSuccess","setSuccess","isError","setError","formik","initialValues","onSubmit","value","post","then","res","setAuthUser","data","user","localStorage","setItem","token","catch","finally","authUser","handleSubmit","handleChange","handleBlur","touched","errors"],"mappings":"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","sourcesContent":["import React, {useState, useContext} from 'react';\r\nimport { useFormik } from 'formik'\r\nimport { Card, Container, Form, Button, Alert } from 'react-bootstrap'\r\nimport * as yup from 'yup'\r\nimport axios from 'axios'\r\nimport {AuthUserCtx} from '../context/auth'\r\nimport {Redirect} from 'react-router-dom'\r\nconst validationSchema = yup.object().shape({\r\n    username: yup.string().min(6, 'Username is less than 6 characters').required('Username is required'),\r\n    password: yup.string().min(6, 'Password is less than 6 characters').required('Password is required'),\r\n})\r\n\r\nexport const Login = () => {\r\n    const authUserCtx = useContext(AuthUserCtx) \r\n    const [login, setLogin] = useState(false)\r\n    const [isSuccess, setSuccess]= useState(false)\r\n    const [isError, setError] = useState(false)\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            username: '',\r\n            password: '',\r\n        },\r\n        onSubmit: (value) => {\r\n            axios.post('http://localhost:4000/auth/login',{\r\n                username: value.username,\r\n                password: value.password\r\n            }).then((res) => {\r\n                authUserCtx.setAuthUser(res.data.user)\r\n                localStorage.setItem('jwt', res.data.token)\r\n                setSuccess(true)\r\n                setError(false)\r\n\r\n            }).catch(() => {\r\n                setError(true)\r\n                setSuccess(false)\r\n            }).finally(() => {\r\n                setLogin(false)\r\n            })\r\n        },\r\n        validationSchema: validationSchema\r\n    })\r\n    if(authUserCtx.authUser){\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n    const { handleSubmit, handleChange, handleBlur, touched, errors } = formik\r\n    return (\r\n        <Container className=\"mt-5\">\r\n            <Card border=\"info\">\r\n                <Card.Header>Login</Card.Header>\r\n                <Card.Body>\r\n                {isSuccess ? <Alert variant=\"success\">Login successfully</Alert> : null}\r\n                    {login && isError ? <Alert variant=\"danger\">Wrong username or password</Alert> : null}\r\n                    <Card.Title>Please fill out the form</Card.Title>\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Form.Group controlId=\"formBasicEmail\">\r\n                            <Form.Label>User Name</Form.Label>\r\n                            <Form.Control type=\"text\" placeholder=\"Enter User Name\" name=\"username\"\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                                isInvalid={touched.username && errors.username} />\r\n                            <Form.Control.Feedback type=\"invalid\">{errors.username}</Form.Control.Feedback>\r\n                        </Form.Group>\r\n                        <Form.Group controlId=\"formPassword\">\r\n                            <Form.Label>Password</Form.Label>\r\n                            <Form.Control type=\"password\" placeholder=\"Password\" name=\"password\"\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                                isInvalid={touched.password && errors.password} />\r\n                            <Form.Control.Feedback type=\"invalid\">{errors.password}</Form.Control.Feedback>\r\n                        </Form.Group>\r\n                        <Button variant=\"primary\" type=\"submit\" disabled={login}>\r\n                            {login ? \"I'm Login\": \"Login\"}\r\n  </Button>\r\n                    </Form>\r\n                </Card.Body>\r\n            </Card>\r\n        </Container>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}